@use 'sass:color';
@use 'sass:list';
@use 'sass:map';


@use "./utils" as utils;
@use "./config" as config;


@use "../node_modules/@catppuccin/palette/scss/catppuccin";



@theme inline {
  @each $color-name, $color-value in map.get(catppuccin.$palette, 'latte') {
    --color-#{$color-name}: var(--catppuccin-color-#{$color-name});
    @if (utils.isAccent($color-name)) {
      @each $variant-type, $variant-identifier in map.get(config.$variants, 'steps') {
        @for $i from 1 through list.length($variant-identifier) {
          --color-#{$color-name}-#{list.nth($variant-identifier, $i)}: var(--catppuccin-color-#{$color-name}-#{list.nth($variant-identifier, $i)});
        }
      }
    }
  }
}



@mixin createFlavorPalette ($flavor) {
  @each $ctp-color-name, $ctp-color-value in map.get(catppuccin.$palette, 'latte') {
    --catppuccin-color-#{$ctp-color-name}: var(--catppuccin-#{$flavor}-#{$ctp-color-name});
    @if (utils.isAccent($ctp-color-name)) {
      @each $variant-type, $variant-identifier in map.get(config.$variants, 'steps') {
        @for $i from 1 through list.length($variant-identifier) {
          --catppuccin-color-#{$ctp-color-name}-#{list.nth($variant-identifier, $i)}: var(--catppuccin-#{$flavor}-#{$ctp-color-name}-#{list.nth($variant-identifier, $i)});
        }
      }
    }
  }
}


@layer base {
  :root {
    @include createFlavorPalette (map.get(config.$defaults, 'light'));
    @variant dark {
      @include createFlavorPalette (map.get(config.$defaults, 'dark'));
    }
  }
  .latte { @include createFlavorPalette ('latte'); }
  .frappe { @include createFlavorPalette ('frappe'); }
  .macchiato { @include createFlavorPalette ('macchiato'); }
  .mocha { @include createFlavorPalette ('mocha'); }
}


@custom-variant latte (&:where(.latte, .latte *));
@custom-variant frappe (&:where(.frappe, .frappe *));
@custom-variant macchiato (&:where(.macchiato, .macchiato *));
@custom-variant mocha (&:where(.mocha, .mocha *));
